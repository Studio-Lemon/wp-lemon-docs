"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[351],{9741(e,n,l){l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"extend/acf-fields","title":"ACF fields","description":"This page will describe the recommended process of adding additional field groups using ACF builder.","source":"@site/docs/extend/acf-fields.mdx","sourceDirName":"extend","slug":"/extend/acf-fields","permalink":"/wp-lemon-docs/extend/acf-fields","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/extend/acf-fields.mdx","tags":[],"version":"current","frontMatter":{"title":"ACF fields","description":"This page will describe the recommended process of adding additional field groups using ACF builder."},"sidebar":"docsSidebar","previous":{"title":"Add global context","permalink":"/wp-lemon-docs/extend/add-context"},"next":{"title":"Working with hooks","permalink":"/wp-lemon-docs/extend/hooks"}}');var d=l(4848),o=l(8453);const s={title:"ACF fields",description:"This page will describe the recommended process of adding additional field groups using ACF builder."},t=void 0,r={},a=[{value:"Field Groups",id:"field-groups",level:2},{value:"Modifying existing fieldgroups",id:"modifying-existing-fieldgroups",level:3},{value:"Adding ACF fields",id:"adding-acf-fields",level:4},{value:"Remove ACF Fields",id:"remove-acf-fields",level:4},{value:"Remove all ACF Fields at once",id:"remove-all-acf-fields-at-once",level:4},{value:"Creating new fieldgroups",id:"creating-new-fieldgroups",level:3},{value:"Fields for ACF blocks",id:"fields-for-acf-blocks",level:3},{value:"Custom ACF fields",id:"custom-acf-fields",level:2},{value:"FluentForms field",id:"fluentforms-field",level:3},{value:"Gravity Forms field",id:"gravity-forms-field",level:3},{value:"Menu field",id:"menu-field",level:3},{value:"Custom field locations",id:"custom-field-locations",level:2},{value:"Menu depth",id:"menu-depth",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["Although it's possible to add or modify ACF fields using the build in UI method, we highly recommend adding the fields using PHP configurations. We find this method more robust, especially in larger websites.\nIf you want to see all the different field types that exist and their default attributes you can take a look right ",(0,d.jsx)(n.a,{href:"https://github.com/StoutLogic/acf-builder/wiki/field-types",children:"here"}),"."]}),"\n",(0,d.jsx)(n.p,{children:"To add or modify ACF fields using PHP configurations you need a field group. Within wp-lemon some post types will already have an existing field group.\nIn the following documentation we will explain both how to modify/remove existing field groups and how to create new groups from scratch."}),"\n",(0,d.jsx)(n.h2,{id:"field-groups",children:"Field Groups"}),"\n",(0,d.jsx)(n.p,{children:"This section will explain how to modify existing field groups and how to create new ones."}),"\n",(0,d.jsx)(n.h3,{id:"modifying-existing-fieldgroups",children:"Modifying existing fieldgroups"}),"\n",(0,d.jsxs)(n.p,{children:["Because these post types will have a fieldgroup by default you don't have to create it yourself.\nBy navigating to the ",(0,d.jsx)(n.code,{children:"library/hooks.php"})," file in your child theme, you can use filters to add, modify or remove fields in an existing fieldgroup."]}),"\n",(0,d.jsx)(n.p,{children:"below we've listed all the existing fieldgroups with the filter name you can use."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Fieldgroups"})}),(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Fieldgroups filter name"})})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Job"}),(0,d.jsx)(n.td,{children:"wp-lemon/filter/model/acf-fields/job"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Person"}),(0,d.jsx)(n.td,{children:"wp-lemon/filter/model/acf-fields/person"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Menu"}),(0,d.jsx)(n.td,{children:"wp-lemon/filter/model/acf-fields/menu"})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"adding-acf-fields",children:"Adding ACF fields"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"/**\n * Fields\n *\n * @package WordPress\n * @subpackage WP_Lemon\\Child\n */\n\nnamespace WP_Lemon\\Child\\Models;\n\nuse StoutLogic\\AcfBuilder\\FieldsBuilder;\nadd_filter(\n   'wp-lemon/filter/model/acf-fields/job',\n   function (FieldsBuilder $job) {\n      $job\n         ->addText('job_location');\n      return $job;\n   },\n);\n"})}),"\n",(0,d.jsx)(n.h4,{id:"remove-acf-fields",children:"Remove ACF Fields"}),"\n",(0,d.jsx)(n.p,{children:"In the same way we can remove an existing ACF field by using the build-in function that ACF provides like so:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"/**\n * Fields\n *\n * @package WordPress\n * @subpackage WP_Lemon\\Child\n */\n\nnamespace WP_Lemon\\Child\\Models;\n\nadd_filter(\n   'wp-lemon/filter/model/acf-fields/job',\n   function (FieldsBuilder $job) {\n      $job\n         ->removeField('salary');\n      return $job;\n   },\n);\n"})}),"\n",(0,d.jsx)(n.h4,{id:"remove-all-acf-fields-at-once",children:"Remove all ACF Fields at once"}),"\n",(0,d.jsxs)(n.p,{children:["In case you want to remove the whole specific field group. you can return ",(0,d.jsx)(n.code,{children:"false"})," in the filter.\nYou can use this option to completely build a field group from the ground up."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"add_filter(\n   'wp-lemon/filter/model/acf-fields/job',\n   function ($job) {\n      return false;\n   },\n);\n"})}),"\n",(0,d.jsx)(n.p,{children:"In the examples above we showed you the different options separately, but when you're modifying a field group you can remove and add multiple ACF fields all within the same filter. You do this by chaining the methods together like so:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"/**\n * Fields\n *\n * @package WordPress\n * @subpackage WP_Lemon\\Child\n */\n\nnamespace WP_Lemon\\Child\\Models;\n\nuse StoutLogic\\AcfBuilder\\FieldsBuilder;\n\nadd_filter(\n   'wp-lemon/filter/model/acf-fields/job',\n   function (FieldsBuilder $job) {\n      $job\n         ->removeField('salary')\n         ->addText('job_location');\n      return $job;\n   },\n);\n"})}),"\n",(0,d.jsx)(n.h3,{id:"creating-new-fieldgroups",children:"Creating new fieldgroups"}),"\n",(0,d.jsxs)(n.p,{children:["When adding ACF fields to a post type that doesn't already have a fieldgroup you can start by creating a file in ",(0,d.jsx)(n.code,{children:"library/models"})," folder of your child theme.\nFor example ",(0,d.jsx)(n.code,{children:"fields-news.php"}),". Inside this file:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"<?php\n\n/**\n * Adds extra fields to news.\n *\n * @package WordPress\n * @subpackage WP_Lemon\n */\n\nnamespace WP_Lemon\\Child\\Models;\n\nuse StoutLogic\\AcfBuilder\\FieldsBuilder;\n\n$news = new FieldsBuilder(\n   'news',\n   [\n      'title' => __('Additional news fields', 'wp-lemon-child'),\n      'style' => 'seamless',\n   ]\n);\n\nadd_action('acf/init', function () use ($news) {\n   $news\n   ->addText('label', [\n      'label'    => __('Label', 'wp-lemon-child'),\n      'required' => 1,\n   ])\n   ->setLocation('post_type', '==', 'news');\n\n   acf_add_local_field_group($news->build());\n});\n"})}),"\n",(0,d.jsx)(n.h3,{id:"fields-for-acf-blocks",children:"Fields for ACF blocks"}),"\n",(0,d.jsxs)(n.p,{children:["When you've build your own ACF block and want to add ACF fields to it, you'll have to go trough a similar process. You can find more information on this in the ",(0,d.jsx)(n.a,{href:"/blocks/block-controller#adding-acf-fields-to-the-block",children:"block controller documentation"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"custom-acf-fields",children:"Custom ACF fields"}),"\n",(0,d.jsx)(n.p,{children:"wp-lemon comes with a couple of custom ACF fields that you can use in your field groups."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Field Type"})}),(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Description"})})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"FluentForms field"}),(0,d.jsx)(n.td,{children:"A select field that allows you to select a FluentForm."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Gravity Forms field"}),(0,d.jsx)(n.td,{children:"A select field that allows you to select a Gravity Form."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Menu field"}),(0,d.jsx)(n.td,{children:"A select field that allows you to select a menu."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"fluentforms-field",children:"FluentForms field"}),"\n",(0,d.jsx)(n.p,{children:"The FluentForms field allows you to select a form from FluentForms in your ACF field."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"->addField('form', 'fluentforms', [\n   'label' => __('Form', 'wp-lemon'),\n   'instructions' => __('Select the form you want to display.', 'wp-lemon'),\n   'return_format' => 'id', // can be 'id' or 'form'\n]);\n"})}),"\n",(0,d.jsxs)(n.p,{children:["You can use this field in combination with the ",(0,d.jsx)(n.code,{children:"get_fluent_form()"})," function to render the form on the front end. More info ",(0,d.jsx)(n.a,{href:"/reference/helper-functions#get_fluent_form",children:"here"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"gravity-forms-field",children:"Gravity Forms field"}),"\n",(0,d.jsx)(n.p,{children:"The Gravity Forms field allows you to select a form from Gravity Forms in your ACF field."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"->addField('form', 'gravityforms', [\n   'label' => __('Form', 'wp-lemon'),\n   'instructions' => __('Select the form you want to display.', 'wp-lemon'),\n   'return_format' => 'id', // can be 'id' or 'form'\n]);\n"})}),"\n",(0,d.jsx)(n.h3,{id:"menu-field",children:"Menu field"}),"\n",(0,d.jsx)(n.p,{children:"The Menu field allows you to select a menu in your ACF field."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"->addField('menu', 'menu', [\n      'label'               => _x('Show navigation', 'Block field label', 'wp-lemon'),\n      'allow_null'          => true,\n      'wpml_cf_preferences' => 1,\n   ]\n);\n"})}),"\n",(0,d.jsx)(n.p,{children:"You can then use the value of this field like this"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"$nav_args = [\n   'menu'       => get_field('menu'),\n   'container'  => '',\n   'menu_class' => 'my-custom-menu-class',\n   'echo'       => false,\n];\n\n$nav = wp_nav_menu($nav_args);\n"})}),"\n",(0,d.jsx)(n.h2,{id:"custom-field-locations",children:"Custom field locations"}),"\n",(0,d.jsx)(n.p,{children:"wp-lemon ships one additional custom location that you can use when creating your own field groups."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Location Type"})}),(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"Description"})})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Menu depth"}),(0,d.jsx)(n.td,{children:"Select a menu depth."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"menu-depth",children:"Menu depth"}),"\n",(0,d.jsx)(n.p,{children:"This location allows you to show or hide a field group based on the depth of the menu item"}),"\n",(0,d.jsx)(n.p,{children:"The following example will add a background color field to the top level menu items of the primary navigation."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-php",children:"$menu_fields = new FieldsBuilder(\n   'menu',\n   [\n      'title' => _x('Menu', 'Backend - Field groep name for menus', 'wp-lemon'),\n      'style' => 'seamless',\n   ]\n);\n$menu_fields\n   ->addField(\n   'background_color',\n   'editor_palette',\n      [\n         'label'               => _x('Background color', 'Backend - ACF field label', 'wp-lemon'),\n         'return_format'       => 'slug',\n         'wpml_cf_preferences' => 1,\n      ]\n   )\n   ->setLocation('nav_menu_item', '==', 'location/primary_navigation')\n   ->and('menu_depth', '==', '0');\nacf_add_local_field_group($menu_fields->build());\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453(e,n,l){l.d(n,{R:()=>s,x:()=>t});var i=l(6540);const d={},o=i.createContext(d);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);