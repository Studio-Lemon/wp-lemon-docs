"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[9106],{8479(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"blocks/innerblocks","title":"Innerblocks","description":"How to use InnerBlocks in wp-lemon","source":"@site/docs/blocks/innerblocks.mdx","sourceDirName":"blocks","slug":"/blocks/innerblocks","permalink":"/wp-lemon-docs/blocks/innerblocks","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/blocks/innerblocks.mdx","tags":[],"version":"current","frontMatter":{"title":"Innerblocks","description":"How to use InnerBlocks in wp-lemon"},"sidebar":"docsSidebar","previous":{"title":"Block JavaScript","permalink":"/wp-lemon-docs/blocks/block-js"},"next":{"title":"Disabling blocks","permalink":"/wp-lemon-docs/blocks/disabling-blocks"}}');var o=t(4848),s=t(8453);const c={title:"Innerblocks",description:"How to use InnerBlocks in wp-lemon"},r=void 0,a={},i=[{value:"Building your template",id:"building-your-template",level:2},{value:"Displaying your template",id:"displaying-your-template",level:2},{value:"Template properties",id:"template-properties",level:2},{value:"Allowed blocks",id:"allowed-blocks",level:3},{value:"Classes",id:"classes",level:3},{value:"Orientation",id:"orientation",level:3},{value:"Templatelock",id:"templatelock",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["By using ",(0,o.jsx)(n.code,{children:"InnerBlocks"}),", you can nest blocks within other blocks.\nThis allows you to create more complex and flexible layouts by placing blocks inside parent blocks."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"}),"\nA single block can only contain one ",(0,o.jsx)(n.code,{children:"InnerBlocks"})," component."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"building-your-template",children:"Building your template"}),"\n",(0,o.jsxs)(n.p,{children:["When using ",(0,o.jsx)(n.code,{children:"InnerBlocks"})," it's common to create a template for the ",(0,o.jsx)(n.code,{children:"InnerBlocks"}),".\nThis will prefill the ",(0,o.jsx)(n.code,{children:"InnerBlocks "}),"component with blocks within the template when inserted and will make it easier to use for you and your clients.\nIn wp-lemon we do this inside the ",(0,o.jsx)(n.code,{children:"HighGround\\Bulldozer\\AbstractBlockRenderer::block_context"})," method."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"public function block_context($context): array\n{\n\t$template = [\n\t\t[\n\t\t\t'core/heading',\n\t\t\t[\n\t\t\t\t'placeholder' => __('Add a title', 'wp-lemon-child'),\n\t\t\t\t'level'       => 3,\n\t\t\t],\n\t\t],\n\t\t[\n\t\t\t'core/paragraph',\n\t\t\t[\n\t\t\t\t'placeholder' => __('Add some text', 'wp-lemon-child'),\n\t\t\t],\n\t\t],\n\t];\n\n\t$args = [\n\t\t'InnerBlocks' => self::create_inner_blocks(template: $template),\n\t];\n\n\treturn array_merge($context, $args);\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"In the example above we've used a heading and a paragraph block.\nOfcourse, you can add other core blocks or even wp-lemon blocks. You can do this like so:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"$template = [\n\t['acf/content-card'],\n];\n"})}),"\n",(0,o.jsx)(n.h2,{id:"displaying-your-template",children:"Displaying your template"}),"\n",(0,o.jsxs)(n.p,{children:["Now place the ",(0,o.jsx)(n.code,{children:"{{ InnerBlocks }}"})," tag in your twig block to see the block inserter in the backend and display the innercontent in the frontend."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-twig",children:"{% extends 'layouts/block-wrap.twig' %}\n\n{% block block__inner %}\n    {{ InnerBlocks }}\n{% endblock %}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"template-properties",children:"Template properties"}),"\n",(0,o.jsxs)(n.p,{children:["By adding extra parameters in the ",(0,o.jsx)(n.code,{children:"create_inner_blocks"})," function we can add some extra functionality.\nIn the list below you can see each parameter with it's functionality in the right order."]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Parameter"}),(0,o.jsx)(n.th,{children:"Function"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"$allowed_blocks"}),(0,o.jsxs)(n.td,{children:["This parameter allows you to make a selection of blocks that are allowed in the ",(0,o.jsx)(n.code,{children:"InnerBlocks"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"$template"}),(0,o.jsx)(n.td,{children:"This parameter refers to your innerblocks template"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"$classes"}),(0,o.jsx)(n.td,{children:"This parameter can be used to give custom classnames to your innerblocks container"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"$orientation"}),(0,o.jsxs)(n.td,{children:["Use this parameters to change the orientation of the arrow to move the child blocks left/right or up down. This is useful in column layouts. Can be ",(0,o.jsx)(n.code,{children:"horizontal"}),", ",(0,o.jsx)(n.code,{children:"vertical"})," or ",(0,o.jsx)(n.code,{children:"false"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"$templatelock"}),(0,o.jsx)(n.td,{children:"This parameter gives the ability to lock down the template so no changes can be made"})]})]})]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"}),"\nIf a parameter is not given it will default to false."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"allowed-blocks",children:"Allowed blocks"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"$allowed_blocks"})," parameter allows you to make a selection of blocks that are allowed in the innerblocks.\nWe used the ",(0,o.jsx)(n.code,{children:"card-grid"})," block from wp-lemon as an example.\nIn this case the we only wanted to allow specific cards we've made.\nWe did this like so:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"public function block_context($context): array\n{\n\t$template = [\n\t\t['acf/content-card'],\n\t];\n\n\t$allowed_blocks = ['acf/content-card', 'acf/image-card', 'acf/price-card'];\n\n\t$args = [\n\t\t'InnerBlocks' => self::create_inner_blocks(allowed_blocks: $allowed_blocks, template: $template),\n\t];\n\n\treturn array_merge($context, $args);\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In the example above we've added it as a parameter in the ",(0,o.jsx)(n.code,{children:"create_inner_blocks"})," function. Note: all wp-lemon blocks that use ",(0,o.jsx)(n.code,{children:"InnerBlocks"})," have a filter to expand/tighten the child blocks allowed.\nYou can find more documentation on this right ",(0,o.jsx)(n.a,{href:"/extend/hooks#filter-examples",children:"here"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"classes",children:"Classes"}),"\n",(0,o.jsx)(n.p,{children:"To add custom classes to your innerblocks use the third parameter. You can put all the classnames in a string separated by a space like so:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"$args = [\n    'InnerBlocks' => self::create_inner_blocks(template: $template, classes: 'classname classname'),\n];\n"})}),"\n",(0,o.jsx)(n.h3,{id:"orientation",children:"Orientation"}),"\n",(0,o.jsxs)(n.p,{children:["Orientation can be used to display the move icons for the child blocks in a left/right or a top/down orientation. This is useful for block layouts were child blocks are next to each other. In that case you would use ",(0,o.jsx)(n.code,{children:"horizontal"})]}),"\n",(0,o.jsx)(n.h3,{id:"templatelock",children:"Templatelock"}),"\n",(0,o.jsx)(n.p,{children:"The fifth and last parameter gives the ability to lock down the template. By default this parameter is false,\nmeaning the template will show in your WordPress editor, but you don't have to stick to it.\nBy setting it on true you'll lock down the template so no changes can be made. This will look like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"$args = [\n    'InnerBlocks' => self::create_inner_blocks(template: $template, classes: 'classname classname', templatelock: true),\n];\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>c,x:()=>r});var l=t(6540);const o={},s=l.createContext(o);function c(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);