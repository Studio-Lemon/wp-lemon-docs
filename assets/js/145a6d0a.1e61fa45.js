"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[3345],{7400(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"blocks/create-block","title":"Creating blocks","description":"Documentation on how to create your own custom block.","source":"@site/docs/blocks/create-block.mdx","sourceDirName":"blocks","slug":"/blocks/create-block","permalink":"/wp-lemon-docs/blocks/create-block","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/blocks/create-block.mdx","tags":[],"version":"current","frontMatter":{"title":"Creating blocks","description":"Documentation on how to create your own custom block."},"sidebar":"docsSidebar","previous":{"title":"Key concepts","permalink":"/wp-lemon-docs/blocks/key-concepts"},"next":{"title":"Block declaration","permalink":"/wp-lemon-docs/blocks/block-declaration"}}');var l=t(4848),c=t(8453);const a={title:"Creating blocks",description:"Documentation on how to create your own custom block."},i=void 0,s={},r=[{value:"Creating a block automatically",id:"creating-a-block-automatically",level:2},{value:"Creating a block manually",id:"creating-a-block-manually",level:2},{value:"change the block.json",id:"change-the-blockjson",level:3},{value:"change the php file",id:"change-the-php-file",level:3},{value:"Check the twig file",id:"check-the-twig-file",level:3},{value:"Common mistakes",id:"common-mistakes",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Because blocks are so common in our websites we've build a tool that helps you creating your blocks automatically.\nAll though we recommend using our tool to prevent any mistakes,\nit is also possible to create your block manually."}),"\n",(0,l.jsx)(n.p,{children:"Below we've laid out the steps to take when taking either route."}),"\n",(0,l.jsx)(n.h2,{id:"creating-a-block-automatically",children:"Creating a block automatically"}),"\n",(0,l.jsxs)(n.p,{children:["Navigate to your block folder in the terminal and run ",(0,l.jsx)(n.code,{children:"npx wp-lemon block create"}),".\nThis will run a cli tool that will scaffold a new block for you based on the example block in your child theme. Nice and easy!"]}),"\n",(0,l.jsx)(n.h2,{id:"creating-a-block-manually",children:"Creating a block manually"}),"\n",(0,l.jsxs)(n.p,{children:["in you child theme there is a ",(0,l.jsx)(n.code,{children:"blocks"}),"folder in which you'll find ",(0,l.jsx)(n.code,{children:"_example/"}),". What you want to do is duplicate this folder to a new specific name."]}),"\n",(0,l.jsx)(n.p,{children:"You can now rename the scss, php and twig file to match the folder name."}),"\n",(0,l.jsx)(n.h3,{id:"change-the-blockjson",children:"change the block.json"}),"\n",(0,l.jsxs)(n.p,{children:["The block.json file holds the metadata for your new block. You can set an icon, description, tags and much more. For now change name to reflect your folder name. See all the variables you can add to the ",(0,l.jsx)(n.code,{children:"$block"})," array over here at the ",(0,l.jsx)(n.a,{href:"https://www.advancedcustomfields.com/resources/acf-blocks-with-block-json/",children:"ACF docs"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"change-the-php-file",children:"change the php file"}),"\n",(0,l.jsxs)(n.p,{children:["After that you want to change the\n",(0,l.jsx)(n.code,{children:"Example_Block"})," class to also reflect your block name and activate the class on the bottom of this file by uncommenting the class call. After that you can update the NAME, constant to also reflect the name. This file automatically gets loaded."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",metastring:"title=library/blocks/_example.php lineNumbers=true",children:"<?php\n\n/**\n * ACF Block declaration\n *\n * @package WordPress\n * @subpackage WP_Lemon\n */\n\nnamespace WP_Lemon\\Child\\Blocks;\n\nuse HighGround\\Bulldozer\\BlockRendererV2 as BlockRenderer;\n\n/**\n * Example block that can be copied for making extra blocks.\n *\n * Follow the API standard of https://www.advancedcustomfields.com/resources/acf-blocks-with-block-json/\n */\nclass Example_Block extends BlockRenderer\n{\n\n\t/**\n\t * The name of the block.\n\t * This needs to be the same as the folder and file name.\n\t */\n\tconst NAME = 'example';\n\n\t/**\n\t * Extend the base context of our block.\n\t * With this function we can add for example a query or\n\t * other custom content.\n\t *\n\t * @param array $context      Holds the block data.\n\t * @return array  $context    Returns the array with the extra content that merges into the original block context.\n\t */\n\tpublic function block_context($context): array\n\t{\n\n\t\t$args = [\n\t\t // 'InnerBlocks' => self::create_inner_blocks(['core/heading', 'core/paragraph']),\n\t\t];\n\n\t\treturn array_merge($context, $args);\n\t}\n\n\n\t/**\n\t * Register fields to the block.\n\t *\n\t * @link https://github.com/StoutLogic/acf-builder\n\t * @return FieldsBuilder\n\t */\n\tpublic function add_fields(): FieldsBuilder\n\t{\n\t\treturn $this->registered_fields;\n\t}\n}\n\n/**\n * Enable the class\n */\n// new Example_Block();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"check-the-twig-file",children:"Check the twig file"}),"\n",(0,l.jsx)(n.p,{children:"After completing the above steps you can check if the twig file has something to show."}),"\n",(0,l.jsx)(n.h2,{id:"common-mistakes",children:"Common mistakes"}),"\n",(0,l.jsx)(n.p,{children:"You can now add the block to a page and see if it works. Common reasons why the block doesn't work:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You forgot to uncomment the block register call in your PHP file."}),"\n",(0,l.jsx)(n.li,{children:"You didn't change the classnames on all places."}),"\n",(0,l.jsx)(n.li,{children:"The folder name, php file name and twig file, the name in your block.json and the NAME constant in your php file don't match."}),"\n",(0,l.jsx)(n.li,{children:"Once verified that the block is working you can continue developing your new block."}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453(e,n,t){t.d(n,{R:()=>a,x:()=>i});var o=t(6540);const l={},c=o.createContext(l);function a(e){const n=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);