"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[8581],{7758(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"extend/add-context","title":"Add global context","description":"Learn how to add global context the wp-lemon way.","source":"@site/docs/extend/add-context.mdx","sourceDirName":"extend","slug":"/extend/add-context","permalink":"/wp-lemon-docs/extend/add-context","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/extend/add-context.mdx","tags":[],"version":"current","frontMatter":{"title":"Add global context","description":"Learn how to add global context the wp-lemon way."},"sidebar":"docsSidebar","previous":{"title":"Using post objects","permalink":"/wp-lemon-docs/working-with-posts/using-post-objects"},"next":{"title":"ACF fields","permalink":"/wp-lemon-docs/extend/acf-fields"}}');var a=n(4848),d=n(8453);const i={title:"Add global context",description:"Learn how to add global context the wp-lemon way."},o=void 0,l={},r=[{value:"Overriding parent methods inside your WP_Lemon_Child_Site class.",id:"overriding-parent-methods-inside-your-wp_lemon_child_site-class",level:2},{value:"Adding additional methods to your WP_Lemon_Child_Site class",id:"adding-additional-methods-to-your-wp_lemon_child_site-class",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"The context is one of the most important concepts to understand in wp-lemon. Think of the context as the set of variables that are passed to your Twig template, whether this is a template, component or even a block."}),"\n",(0,a.jsx)(t.p,{children:"By default wp-lemon prepares and adds quite a few element to the global context:"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Key"}),(0,a.jsx)(t.th,{children:"Type"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"env"}),(0,a.jsx)(t.td,{children:"string"}),(0,a.jsx)(t.td,{children:"Holds the environment version: development, staging or production"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"logo"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"By default holds header and footer logos and their uri's, width and height."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"pages"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsxs)(t.td,{children:["Holds the important pages in wp-lemon as well as the archive pages that can be set via the customizer. Also holds the special pages you define yourself. ",(0,a.jsx)(t.a,{href:"/extend/special-pages",children:"Lean more about special pages"}),"."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"socials"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"Returns all the socials links set in the customizer and their labels, names, url and icons."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"contact"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"Returns phonenumer and whatsapp number in a variety of formats. As well as the e-mail address."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"nav"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"Returns primary, footer, multilanguage menus. As well as nav.back on single pages to return to the archive page."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"google_api_key"}),(0,a.jsx)(t.td,{children:"string"}),(0,a.jsx)(t.td,{children:"Google api key"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"contact_buttons"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"Context for floating buttons on the bottom left of the page."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"child_theme_author"}),(0,a.jsx)(t.td,{children:"array"}),(0,a.jsx)(t.td,{children:"returns name and url of the child theme author set in style.css"})]})]})]}),"\n",(0,a.jsx)(t.p,{children:"There are two ways you can alter the context:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["by overriding parent methods inside your ",(0,a.jsx)(t.code,{children:"WP_Lemon_Child_Site"})," class."]}),"\n",(0,a.jsxs)(t.li,{children:["Adding additional methods to your ",(0,a.jsx)(t.code,{children:"WP_Lemon_Child_Site"})," class and adding them to ",(0,a.jsx)(t.code,{children:"WP_Lemon_Child_Site::extend_site_information()"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"overriding-parent-methods-inside-your-wp_lemon_child_site-class",children:"Overriding parent methods inside your WP_Lemon_Child_Site class."}),"\n",(0,a.jsxs)(t.p,{children:["In the example below we add the get_navs method to the child class, call the parent method so we have that context as well, and then expanding the property. In this example you could use ",(0,a.jsx)(t.code,{children:"nav.primary"})," ",(0,a.jsx)(t.code,{children:"nav.secondary"})," to get the new nav menus."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:"protected static function get_navs(): array\n{\n\tparent::get_navs();\n\n\tstatic::$menus['primary'] = wp_nav_menu(\n\t\t[\n\t\t\t'echo'           => false,\n\t\t\t'theme_location' => 'primary_navigation',\n\t\t\t'menu_class'     => 'navbar-nav',\n\t\t\t'depth'          => 1,\n\t\t\t'container'      => false,\n\t\t]\n\t);\n\n\tstatic::$menus['secondary'] = wp_nav_menu(\n\t\t[\n\t\t\t'echo'           => false,\n\t\t\t'theme_location' => 'secondary_navigation',\n\t\t\t'menu_class'     => 'navbar-nav',\n\t\t\t'depth'          => 1,\n\t\t\t'container'      => false,\n\t\t]\n\t);\n\n\treturn static::$menus;\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"adding-additional-methods-to-your-wp_lemon_child_site-class",children:"Adding additional methods to your WP_Lemon_Child_Site class"}),"\n",(0,a.jsx)(t.p,{children:"In the following example we will extend the global context to add a 'label' to use in templates that holds the current page title or title of the archive page for single pages."}),"\n",(0,a.jsx)(t.p,{children:"We first create our method builds the context and returns it."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:"public function add_label_context()\n{\n\t$label = false;\n\t// if is front page, return\n\tif (is_front_page()) {\n\t\treturn false;\n\t}\n\n\tif (is_page()) {\n\t\t$label = get_the_title();\n\t} else if (self::is_post_type(['job', 'news', 'case'])) {\n\t\t$label = WP_Lemon_Child_Site::get_archive_page();\n\t\t$label = $label['title'];\n\t}\n\n\treturn $label;\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"After that we add it to our extend_site_information method under a convenient key."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:"protected function extend_site_information(): array\n{\n\treturn [\n\t\t++ 'nav_label' => $this->add_label_context(),\n\t];\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"We can now use it inside twig files like this:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-twig",children:'{% if nav_label %}\n    <div class="nav-label">\n        <span>{{ nav_label }}</span>\n    </div>\n{% endif %}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>i,x:()=>o});var s=n(6540);const a={},d=s.createContext(a);function i(e){const t=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(d.Provider,{value:t},e.children)}}}]);