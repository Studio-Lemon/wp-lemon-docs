"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[4699],{8614(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"blocks/block-js","title":"Block JavaScript","description":"Documentation on writing JavaScript for custom blocks.","source":"@site/docs/blocks/block-js.mdx","sourceDirName":"blocks","slug":"/blocks/block-js","permalink":"/wp-lemon-docs/blocks/block-js","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/blocks/block-js.mdx","tags":[],"version":"current","frontMatter":{"title":"Block JavaScript","description":"Documentation on writing JavaScript for custom blocks."},"sidebar":"docsSidebar","previous":{"title":"Block style","permalink":"/wp-lemon-docs/blocks/block-style"},"next":{"title":"Innerblocks","permalink":"/wp-lemon-docs/blocks/innerblocks"}}');var r=i(4848),o=i(8453);const s={title:"Block JavaScript",description:"Documentation on writing JavaScript for custom blocks."},t=void 0,c={},a=[{value:"JavaScript file structure",id:"javascript-file-structure",level:2},{value:"Exporting functions",id:"exporting-functions",level:2},{value:"Using in app.js (Frontend)",id:"using-in-appjs-frontend",level:2},{value:"Using in editor.js (Backend)",id:"using-in-editorjs-backend",level:2},{value:"Best practices",id:"best-practices",level:2},{value:"1. Check for elements before initializing",id:"1-check-for-elements-before-initializing",level:3},{value:"2. Use semantic selectors",id:"2-use-semantic-selectors",level:3},{value:"3. Handle multiple instances",id:"3-handle-multiple-instances",level:3},{value:"4. Clean up event listeners",id:"4-clean-up-event-listeners",level:3},{value:"Available javaScript helpers",id:"available-javascript-helpers",level:2},{value:"Available libraries",id:"available-libraries",level:2},{value:"Debugging",id:"debugging",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"When creating a custom block, a JavaScript file is automatically created alongside your other block files.\nThis JS file allows you to add interactive functionality to your blocks and can be used both on the frontend and in the WordPress editor."}),"\n",(0,r.jsx)(n.h2,{id:"javascript-file-structure",children:"JavaScript file structure"}),"\n",(0,r.jsxs)(n.p,{children:["Each block gets its own JavaScript file located in the same directory as your block files.\nFor example, if you have a block called ",(0,r.jsx)(n.code,{children:"hero"}),", you'll find a ",(0,r.jsx)(n.code,{children:"index.js"})," file in the ",(0,r.jsx)(n.code,{children:"blocks/hero/"})," directory."]}),"\n",(0,r.jsxs)(n.p,{children:["The JavaScript file that is generated is always called ",(0,r.jsx)(n.code,{children:"index.js"})]}),"\n",(0,r.jsx)(n.h2,{id:"exporting-functions",children:"Exporting functions"}),"\n",(0,r.jsxs)(n.p,{children:["The recommended pattern is to export a default function from your block's JavaScript file.\nThis function can then be imported and used in both ",(0,r.jsx)(n.code,{children:"app.js"})," (for frontend functionality) and ",(0,r.jsx)(n.code,{children:"editor.js"})," (for backend/editor functionality)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// blocks/hero/hero.js\nimport Swiper from 'swiper';\nimport { Pagination, Autoplay, EffectFade, Parallax } from 'swiper/modules';\n\nexport default function heroSlider() {\n   const heroSliders = document.querySelectorAll('.js-hero');\n\n   if (!heroSliders.length) {\n      return;\n   }\n\n   heroSliders.forEach((slider) => {\n      console.log('slider', slider);\n      const swiper = new Swiper(slider, {\n         loop: true,\n         modules: [Pagination, Autoplay, EffectFade, Parallax],\n         speed: 1000,\n         autoplay: {\n            delay: 5000,\n            enabled: true,\n         },\n         pagination: {\n            el: '.swiper-pagination',\n            clickable: true,\n         },\n         parallax: true,\n         effect: 'fade',\n         fadeEffect: {\n            crossFade: true,\n         },\n      });\n   });\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"using-in-appjs-frontend",children:"Using in app.js (Frontend)"}),"\n",(0,r.jsxs)(n.p,{children:["Import and call your block's function within the ",(0,r.jsx)(n.code,{children:"domReady"})," callback in ",(0,r.jsx)(n.code,{children:"app.js"}),".\nThis ensures your JavaScript runs after the DOM is fully loaded."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// app.js\nimport heroSlider from '../../../blocks/hero';\n\ndomReady(() => {\n   frontend();\n   heroSlider();\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"using-in-editorjs-backend",children:"Using in editor.js (Backend)"}),"\n",(0,r.jsxs)(n.p,{children:["For editor functionality, import your function in ",(0,r.jsx)(n.code,{children:"editor.js"})," and call it within the appropriate ACF hooks.\nThis is particularly useful for blocks that need JavaScript functionality in the WordPress editor preview."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// editor.js\nimport heroSlider from '../../../blocks/hero';\n\nbackend();\ndomReady(() => {\n    acf.addAction('render_block_preview', function (el, block) {\n        heroSlider();\n    });\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-check-for-elements-before-initializing",children:"1. Check for elements before initializing"}),"\n",(0,r.jsx)(n.p,{children:"Always check if the required elements exist before running your code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default function myBlock() {\n   const elements = document.querySelectorAll('.js-my-block');\n   \n   if (!elements.length) {\n      return;\n   }\n   \n   // Your code here\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-semantic-selectors",children:"2. Use semantic selectors"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"js-"})," prefixed classes for JavaScript selectors to separate behavior from styling:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Good\nconst sliders = document.querySelectorAll('.js-hero-slider');\n\n// Avoid\nconst sliders = document.querySelectorAll('.hero-slider');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-handle-multiple-instances",children:"3. Handle multiple instances"}),"\n",(0,r.jsxs)(n.p,{children:["When your block might appear multiple times on a page, use ",(0,r.jsx)(n.code,{children:"forEach"})," to handle each instance:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default function accordionBlock() {\n   const accordions = document.querySelectorAll('.js-accordion');\n   \n   accordions.forEach((accordion) => {\n      const triggers = accordion.querySelectorAll('.js-accordion-trigger');\n      \n      triggers.forEach((trigger) => {\n         trigger.addEventListener('click', () => {\n            // Handle click\n         });\n      });\n   });\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-clean-up-event-listeners",children:"4. Clean up event listeners"}),"\n",(0,r.jsx)(n.p,{children:"For more complex interactions, consider cleanup:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default function myBlock() {\n   const elements = document.querySelectorAll('.js-my-block');\n   \n   elements.forEach((element) => {\n      const handleClick = (e) => {\n         // Handle click\n      };\n      \n      element.addEventListener('click', handleClick);\n      \n      // Store reference for potential cleanup\n      element._clickHandler = handleClick;\n   });\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"available-javascript-helpers",children:"Available javaScript helpers"}),"\n",(0,r.jsxs)(n.p,{children:["wp-lemon provides several JavaScript helper functions that you can use in your blocks.\nYou can find the full documentation for these functions in the ",(0,r.jsx)(n.a,{href:"/reference/javascript-functions",children:"JavaScript Functions Reference"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"available-libraries",children:"Available libraries"}),"\n",(0,r.jsx)(n.p,{children:"wp-lemon comes with several JavaScript libraries that you can use in your blocks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bootstrap"}),": For UI components and utilities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Swiper"}),": For sliders and carousels"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AOS"}),": For scroll animations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lodash throttle"}),": For performance optimization"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Example using multiple libraries\nimport Swiper from 'swiper';\nimport AOS from 'aos';\nimport throttle from 'lodash.throttle';\n\nexport default function myBlock() {\n   // Initialize Swiper\n   const swiper = new Swiper('.js-my-slider', {\n      // Swiper options\n   });\n   \n   // Initialize AOS\n   AOS.init();\n   \n   // Use throttle for scroll events\n   const handleScroll = throttle(() => {\n      // Handle scroll\n   }, 100);\n   \n   window.addEventListener('scroll', handleScroll);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"debugging",children:"Debugging"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"console.log()"})," statements to debug your JavaScript:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default function myBlock() {\n   const elements = document.querySelectorAll('.js-my-block');\n   \n   console.log('Found elements:', elements.length);\n   \n   elements.forEach((element, index) => {\n      console.log(`Initializing element ${index}:`, element);\n      // Your code here\n   });\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>t});var l=i(6540);const r={},o=l.createContext(r);function s(e){const n=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);