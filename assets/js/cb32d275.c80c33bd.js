"use strict";(globalThis.webpackChunkwp_lemon_docs=globalThis.webpackChunkwp_lemon_docs||[]).push([[8205],{3480(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"migrations/2-3","title":"Migrate to wp-lemon 3","description":"How to update to the newest version of wp-lemon","source":"@site/docs/migrations/2-3.mdx","sourceDirName":"migrations","slug":"/migrations/2-3","permalink":"/wp-lemon-docs/migrations/2-3","draft":false,"unlisted":false,"editUrl":"https://github.com/Studio-Lemon/wp-lemon-docs/tree/master/docs/migrations/2-3.mdx","tags":[],"version":"current","frontMatter":{"title":"Migrate to wp-lemon 3","description":"How to update to the newest version of wp-lemon","disableTableOfContents":true},"sidebar":"docsSidebar","previous":{"title":"Migrate to wp-lemon 4","permalink":"/wp-lemon-docs/migrations/3-4"},"next":{"title":"Changelog","permalink":"/wp-lemon-docs/changelog/"}}');var s=n(4848),i=n(8453);const r={title:"Migrate to wp-lemon 3",description:"How to update to the newest version of wp-lemon",disableTableOfContents:!0},a=void 0,d={},l=[{value:"Before we get started",id:"before-we-get-started",level:2},{value:"Upgrade steps",id:"upgrade-steps",level:2},{value:"Step 1. Set new major version of wp-lemon",id:"step-1-set-new-major-version-of-wp-lemon",level:3},{value:"Step 2. Update child-theme dependencies",id:"step-2-update-child-theme-dependencies",level:3},{value:"Step 3. Update child-theme script",id:"step-3-update-child-theme-script",level:3},{value:"Step 4. Remove iconfont and lato folders",id:"step-4-remove-iconfont-and-lato-folders",level:3},{value:"Step 5. import new dependencies in app.js",id:"step-5-import-new-dependencies-in-appjs",level:3},{value:"Step 6. Run update-parent command",id:"step-6-run-update-parent-command",level:3},{value:"Step 7. Run production build",id:"step-7-run-production-build",level:3},{value:"Step 8. Check child theme on hooks and actions usage.",id:"step-8-check-child-theme-on-hooks-and-actions-usage",level:3},{value:"Visual/Code check",id:"visualcode-check",level:2},{value:"Deploy",id:"deploy",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Welcome to version 3.0 of wp-lemon. In this guide we will go over the details to upgrade your current 2.x website to the 3.x version."}),"\n",(0,s.jsx)(t.h2,{id:"before-we-get-started",children:"Before we get started"}),"\n",(0,s.jsx)(t.p,{children:"Please make sure you have the latest version of your project checked out and have a recent database and media files to check your website locally."}),"\n",(0,s.jsx)(t.h2,{id:"upgrade-steps",children:"Upgrade steps"}),"\n",(0,s.jsx)(t.p,{children:"Follow the next steps to upgrade your project to the 3.x branch."}),"\n",(0,s.jsx)(t.h3,{id:"step-1-set-new-major-version-of-wp-lemon",children:"Step 1. Set new major version of wp-lemon"}),"\n",(0,s.jsx)(t.p,{children:"Navigate to your composer.json file in the project root and update it as follows."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'-    "satispress/wp-lemon": "^2.0",\n+    "satispress/wp-lemon": "^3.0",\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-2-update-child-theme-dependencies",children:"Step 2. Update child-theme dependencies"}),"\n",(0,s.jsx)(t.p,{children:"Navigate to your child theme and open package.json and update the following dependencies to at least these versions."}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"\u26a0\ufe0f\nMake sure not to delete/overwrite extra dependencies that you may have included."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'    "devDependencies": {\n        "@wordpress/browserslist-config": "^4.1.0",\n        "basebuilder-config": "^2.3.0",\n        "prettier": "^2.5",\n        "prettier-plugin-twig-melody": "^0.4.6"\n    },\n    "dependencies": {\n        "@popperjs/core": "^2.11.0",\n        "aos": "^3.0.0-beta.6",\n        "bootstrap": "^5.1",\n        "lodash.throttle": "^4.1.1",\n        "swiper": "^7.3",\n        "vanilla-lazyload": "17.5"\n    }\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-3-update-child-theme-script",children:"Step 3. Update child-theme script"}),"\n",(0,s.jsx)(t.p,{children:"Navigate to your child theme and open package.json and replace the scripts section with the following code."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'    "scripts": {\n        "bootstrap-project": "composer install --working-dir=../../../../ && yarn install",\n        "composer-deploy": "composer install --working-dir=../../../../ --no-dev --optimize-autoloader",\n        "composer-update": "composer update --working-dir=../../../../",\n        "update-parent": "composer update --working-dir=../../../../ && yarn install",\n        "dev": "basebuilder-config development",\n        "development": "basebuilder-config development",\n        "watch": "basebuilder-config watch",\n        "production": "basebuilder-config production",\n        "lint": "yarn run -s lint:scripts && npm run -s lint:styles",\n        "lint:styles": "stylelint \\"resources/assets/styles/**/*.scss\\"",\n        "lint:scripts": "eslint resources/assets/scripts",\n        "lint:twig": "yarn run prettier --write \\"resources/views/**/*.twig\\""\n    },\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-4-remove-iconfont-and-lato-folders",children:"Step 4. Remove iconfont and lato folders"}),"\n",(0,s.jsxs)(t.p,{children:["Navigate to ",(0,s.jsx)(t.code,{children:"resources/assets/fonts"})," and remove the ",(0,s.jsx)(t.code,{children:"iconfont"})," and ",(0,s.jsx)(t.code,{children:"lato"})," folders."]}),"\n",(0,s.jsx)(t.h3,{id:"step-5-import-new-dependencies-in-appjs",children:"Step 5. import new dependencies in app.js"}),"\n",(0,s.jsx)(t.p,{children:"Navigate to resources/assets/scripts/app.js and locate the bootstrap imports at te top. Remove the util import and add the offcanvas import as shown in this code example."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"- import 'bootstrap/js/dist/util';\n  import 'bootstrap/js/dist/button';\n  import 'bootstrap/js/dist/collapse';\n+ import 'bootstrap/js/dist/offcanvas';\n"})}),"\n",(0,s.jsx)(t.h3,{id:"step-6-run-update-parent-command",children:"Step 6. Run update-parent command"}),"\n",(0,s.jsxs)(t.p,{children:["Open a new console in your child theme and run the following command: ",(0,s.jsx)(t.code,{children:"yarn run update-parent"})]}),"\n",(0,s.jsx)(t.p,{children:"This will update both PHP and node dependencies to their latest versions."}),"\n",(0,s.jsx)(t.h3,{id:"step-7-run-production-build",children:"Step 7. Run production build"}),"\n",(0,s.jsxs)(t.p,{children:["Open a new console in your child theme and run the following command: ",(0,s.jsx)(t.code,{children:"yarn run production"}),"\nThis will create a fresh build with the new dependencies. If the build fails, please try to debug the error or open a new ticket."]}),"\n",(0,s.jsx)(t.h3,{id:"step-8-check-child-theme-on-hooks-and-actions-usage",children:"Step 8. Check child theme on hooks and actions usage."}),"\n",(0,s.jsxs)(t.p,{children:["The naming of filters got a massive overhaul. Please double check our ",(0,s.jsx)(t.a,{href:"/extend/hooks#filter-examples",children:"filters chapter"})," and triple-check if your filters need to be updated and work as intended."]}),"\n",(0,s.jsx)(t.h2,{id:"visualcode-check",children:"Visual/Code check"}),"\n",(0,s.jsx)(t.p,{children:"Since this is a new major version please check the build locally with the latest database and media files. Check for any visual differences. If you find a major difference please try to debug or open a ticket."}),"\n",(0,s.jsx)(t.p,{children:"If you've written custom code based on Swiper or Bootstrap, for example created a new block or a slider that involves on of these libraries, please check out the following migration guides."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Please check custom bootstrap code against ",(0,s.jsx)(t.a,{href:"https://getbootstrap.com/docs/5.1/migration/",children:"https://getbootstrap.com/docs/5.1/migration/"})]}),"\n",(0,s.jsxs)(t.li,{children:["Please update custom Swipers against ",(0,s.jsx)(t.a,{href:"https://swiperjs.com/migration-guide",children:"https://swiperjs.com/migration-guide"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"deploy",children:"Deploy"}),"\n",(0,s.jsxs)(t.p,{children:["Please follow the following guide to deploy the update to the production server. ",(0,s.jsx)(t.a,{href:"/deployment/updates#deploy-update",children:"Deploy update!"})]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>r,x:()=>a});var o=n(6540);const s={},i=o.createContext(s);function r(e){const t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);